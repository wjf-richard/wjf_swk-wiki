webpackJsonp([1],{"+cgv":function(t,e){},"1/oy":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},"8f5n":function(t,e){},Id91:function(t,e){},L2Gb:function(t,e){},NA6s:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("e6fC"),s=a("XyMi");var r=function(t){a("feHY"),a("ggw/"),a("luqJ")},c=Object(s.a)({name:"app"},function(){var t=this.$createElement;return(this._self._c||t)("router-view")},[],!1,r,null,null).exports,l=a("/ocq"),o=a("BO1k"),d=a.n(o),v=a("mvHQ"),u=a.n(v),f=a("pFYg"),h=a.n(f);var m=function(t){a("NA6s")},p=Object(s.a)({name:"md-header"},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"app-header navbar nav-wiki"},[e("div",{staticClass:"slogan"},[this._v("WIKI知识库")])])}],!1,m,null,null).exports,_=a("d7EF"),C=a.n(_),g=a("ifoU"),y=a.n(g),w=a("mtWM"),A=a.n(w).a.create();A.defaults.timaout=5e3,A.defaults.baseURL="http://gateway.mygear.cn/wiki";var I=A;var L={name:"sidebar",data:function(){return{categoryList:[],articleList:{categoryId:"",data:[]},categoryId:""}},created:function(){this.getCategoryList(),this.getArticleList(localStorage.getItem("categoryId"))},methods:{getCategoryList:function(){var t=this,e=localStorage.getItem("categoryId");I({url:"/categories",method:"GET"}).then(function(a){var i=new y.a(a.data.data.content.map(function(t,e){return[e,t]})),n=!0,s=!1,r=void 0;try{for(var c,l=d()(i);!(n=(c=l.next()).done);n=!0){var o=c.value,v=C()(o,2),u=v[0],f=v[1],h=!1;parseInt(e)===parseInt(f.id)&&(h=!0),t.categoryList.push({id:f.id,name:f.name,isOpen:h,key:u})}}catch(t){s=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw r}}})},categoryOnClick:function(t,e){localStorage.setItem("categoryId",t);var a=!0,i=!1,n=void 0;try{for(var s,r=d()(e);!(a=(s=r.next()).done);a=!0){var c=s.value;if(c.id===t&&!0===c.isOpen)return void(c.isOpen=!1);c.id===t?c.isOpen=!0:c.isOpen=!1}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}this.clearArticleList(),this.getArticleList(t)},getArticleList:function(t){var e,a=this,i=localStorage.getItem("articleId");(e=t,I({url:"/articles/"+e+"/category",method:"GET"})).then(function(e){if(a.articleList.categoryId=t,e.data.data&&e.data.data.length>0){a.$emit("isArticleListEmpty",!1);var n=!0,s=!1,r=void 0;try{for(var c,l=d()(e.data.data);!(n=(c=l.next()).done);n=!0){var o=c.value,v=!1;parseInt(i)===parseInt(o.id)&&(v=!0),a.articleList.data.push({id:o.id,name:o.subtitle,isActive:v})}}catch(t){s=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw r}}}else a.$emit("isArticleListEmpty",!0)})},clearArticleList:function(){this.articleList.data=[],this.articleList.categoryId=""},getArticleContent:function(t){t.isActive=!0,this.$emit("ievent",t.id)}}};var b=function(t){a("L2Gb")},k={name:"detail",components:{Header:p,Sidebar:Object(s.a)(L,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("nav",{staticClass:"sidebar-nav"},[a("ul",{staticClass:"nav"},[t._l(t.categoryList,function(e,i){return[[a("li",{key:i,staticClass:"nav-item nav-dropdown",class:{open:e.isOpen},attrs:{disabled:""}},[a("div",{staticClass:"nav-link nav-dropdown-toggle",on:{click:function(a){t.categoryOnClick(e.id,t.categoryList)}}},[t._v(t._s(e.name))]),t._v(" "),[a("ul",{staticClass:"nav-dropdown-items"},t._l(t.articleList.data,function(e,i){return a("li",{key:i,staticClass:"nav-item"},[a("div",{on:{click:function(a){t.getArticleContent(e)}}},[a("span",{staticClass:"nav-link nav-link-item fold",class:{on:e.isActive}},[t._v("\n                      "+t._s(e.name)+"\n                    ")])])])}))]],2)]]})],2)])])},[],!1,b,null,null).exports},data:function(){return{articleContent:{},reference:[],nav:[],noArticle:!1,isShow:!0,isRef:!1,isAtta:!1,isOpenData:"",articleId:""}},created:function(){localStorage.getItem("articleId")&&this.initArticleContent()},methods:{initArticleContent:function(){this.noArticle=!1,this.isShow=!1,this.reference=[],this.articleId=JSON.parse(localStorage.getItem("articleId")),this.getArticleContent(this.articleId)},deepCopy:function(t){var e=t.constructor===Array?[]:{};if(e.constructor=t.constructor,"object"===(void 0===t?"undefined":h()(t))){if(window.JSON)e=JSON.parse(u()(t));else for(var a in t)t[a].constructor===RegExp||t[a].constructor===Date?e[a]=t[a]:"object"===h()(t[a])?e[a]=this.deepCopy(t[a]):e[a]=t[a];return e}},getArticleContent:function(t){var e,a=this;this.noArticle=!1,this.isShow=!1,this.reference=[],this.articleId=t,localStorage.setItem("articleId",u()(this.articleId)),(e=this.articleId,I({url:"/articles/"+e+"/content",method:"GET"})).then(function(t){if(a.articleContent=t.data.data,0===t.data.data.article.attachments.length?a.isAtta=!1:a.isAtta=!0,t.data.data.article.reference){a.isRef=!0;var e=[],i=t.data.data.article.reference.split("<p>"),n=!0,s=!1,r=void 0;try{for(var c,l=d()(i);!(n=(c=l.next()).done);n=!0){var o=c.value.replace("</p>","");e.push(o)}}catch(t){s=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw r}}var v=!0,u=!1,f=void 0;try{for(var h,m=d()(e);!(v=(h=m.next()).done);v=!0){var p=h.value;a.reference.push({name:p})}}catch(t){u=!0,f=t}finally{try{!v&&m.return&&m.return()}finally{if(u)throw f}}}else a.isRef=!1})},articleListEmpty:function(t){this.noArticle=t,this.isShow=!1}}};var O=function(t){a("8f5n")},x=Object(s.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),t._v(" "),a("div",{staticClass:"app-body"},[a("Sidebar",{on:{ievent:t.getArticleContent,isArticleListEmpty:t.articleListEmpty}}),t._v(" "),a("main",{staticClass:"main"},[t.isShow?[t._m(0)]:t.noArticle?[t._m(1)]:[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"md-header"},[a("h5",{staticClass:"title"},[t._v(t._s(t.articleContent.article.title))]),t._v(" "),a("div",{staticClass:"tip"},[a("div",{staticClass:"md-tag"},[t._v("作者: "+t._s(t.articleContent.article.author))]),t._v(" "),a("div",{staticClass:"md-tag"},[t._v("日期: "+t._s(t.articleContent.article.updatedAt))]),t._v(" "),a("div",{staticClass:"md-tag"},[t._v("浏览数: "+t._s(t.articleContent.article.pv)+"次")])]),t._v(" "),a("div",{staticClass:"key-word"},[t._v("\n              关键词:\n              "),t._l(t.articleContent.article.keywordTags,function(e,i){return a("div",{key:i,staticClass:"md-tag"},[a("i",{staticClass:"fa fa-tag"}),t._v(" "),a("span",[t._v(t._s(e.name))])])})],2),t._v(" "),a("div",{staticClass:"key-word"},[t._v("\n              项目标签:\n              "),t._l(t.articleContent.article.projectTags,function(e,i){return a("div",{key:i,staticClass:"md-tag"},[a("i",{staticClass:"fa fa-tag"}),t._v(" "),a("span",[t._v(t._s(e.name))])])})],2)]),t._v(" "),a("div",{staticClass:"md-content"},[a("mavon-editor",{attrs:{defaultOpen:"preview",toolbarsFlag:!1,subfield:!1,preview:!0},model:{value:t.articleContent.textHtml,callback:function(e){t.$set(t.articleContent,"textHtml",e)},expression:"articleContent.textHtml"}})],1),t._v(" "),a("div",{staticClass:"md-footer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isRef,expression:"isRef"}],staticClass:"refen"},[a("div",{staticClass:"text"},[t._v("参考:")]),t._v(" "),a("div",{staticClass:"href"},t._l(t.reference,function(e,i){return a("a",{key:i,attrs:{href:e.name,target:"_blank"}},[t._v(t._s(e.name))])}))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAtta,expression:"isAtta"}],staticClass:"refen"},[a("div",{staticClass:"text"},[t._v("附件:")]),t._v(" "),a("div",{staticClass:"href"},t._l(t.articleContent.article.attachments,function(e,i){return a("a",{key:i,attrs:{href:e.url,download:"5555"}},[t._v(t._s(e.name))])}))])])])]],2)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid welcome"},[e("div",{staticClass:"animated fadeIn"},[e("p",{staticClass:"text-info"},[this._v("欢迎来到WIKI知识库")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid welcome"},[e("div",{staticClass:"animated fadeIn"},[e("p",{staticClass:"text-info"},[this._v("该分类没有相关文章")])])])}],!1,O,null,null).exports;i.default.use(l.a);var S=new l.a({mode:"hash",linkActiveClass:"open active",scrollBehavior:function(){return{y:0}},routes:[{path:"/",name:"详情页",component:x}]}),E=a("zL8q"),$=a.n(E),H=(a("tvR6"),a("OS1Z")),j=a.n(H),N=(a("pw1w"),a("G0J2")),R=a.n(N);a("3f40"),a("4qOc"),a("+cgv");i.default.use(n.a),i.default.use($.a),i.default.use(j.a),i.default.use(R.a),new i.default({el:"#app",router:S,template:"<App/>",components:{App:c}})},feHY:function(t,e){},"ggw/":function(t,e){},luqJ:function(t,e){},pw1w:function(t,e){},tvR6:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c24642459b605a45aabe.js.map