webpackJsonp([1],{"+cgv":function(t,e){},"1/oy":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},"8sxi":function(t,e){},AAkB:function(t,e){},CZ73:function(t,e){},Id91:function(t,e){},MMjG:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("e6fC"),s=a("XyMi");var l=function(t){a("feHY"),a("ggw/"),a("luqJ")},r=Object(s.a)({name:"app"},function(){var t=this.$createElement;return(this._self._c||t)("router-view")},[],!1,l,null,null).exports,o=a("/ocq"),c={items:[{name:"仪表盘",url:"/dashboard",icon:"icon-speedometer"},{name:"添加文章",url:"/addArticle",icon:"icon-note"},{name:"文章列表",url:"/articleList",icon:"icon-book-open"},{name:"系统设置",url:"/systemSetup",icon:"icon-settings"}]},d=Object(s.a)({name:"c-aside"},function(){var t=this.$createElement;return(this._self._c||t)("aside",{staticClass:"aside-menu"})},[],!1,null,null,null).exports,u={props:{list:{type:Array,required:!0,default:function(){return[]}}},methods:{isLast:function(t){return t===this.list.length-1},showName:function(t){return t.meta&&t.meta.label&&(t=t.meta&&t.meta.label),t.name&&(t=t.name),t}}},m=Object(s.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ol",{staticClass:"breadcrumb"},t._l(t.list,function(e,i){return a("li",{key:i,staticClass:"breadcrumb-item"},[t.isLast(i)?a("span",{staticClass:"active"},[t._v(t._s(t.showName(e)))]):a("router-link",{attrs:{to:e}},[t._v(t._s(t.showName(e)))])],1)}))},[],!1,null,null,null).exports,f={props:{variant:{type:String}},computed:{classList:function(){return["callout",this.calloutVariant]},calloutVariant:function(){return this.variant?"callout-"+this.variant:""}}},h=(Object(s.a)(f,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.classList},[this._t("default")],2)},[],!1,null,null,null).exports,Object(s.a)({name:"c-footer"},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"app-footer"},[e("span",[e("a",{attrs:{href:"http://coreui.io"}},[this._v("CoreUI")]),this._v(" © 2018 creativeLabs.")]),this._v(" "),e("span",{staticClass:"ml-auto"},[this._v("Powered by "),e("a",{attrs:{href:"http://coreui.io"}},[this._v("CoreUI")])])])}],!1,null,null,null).exports),v={name:"c-header",methods:{sidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-hidden")},sidebarMinimize:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-minimized")},mobileSidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-mobile-show")}}},p=Object(s.a)(v,function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"app-header navbar"},[e("button",{staticClass:"navbar-toggler mobile-sidebar-toggler d-lg-none",attrs:{type:"button"},on:{click:this.mobileSidebarToggle}},[e("span",{staticClass:"navbar-toggler-icon"})]),this._v(" "),e("b-link",{staticClass:"navbar-brand",attrs:{to:"#"}},[this._v("WIKI知识库后台")]),this._v(" "),e("button",{staticClass:"navbar-toggler sidebar-toggler d-md-down-none mr-auto",attrs:{type:"button"},on:{click:this.sidebarToggle}},[e("span",{staticClass:"navbar-toggler-icon"})])],1)},[],!1,null,null,null).exports,b=Object(s.a)({name:"sidebar-footer"},function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,g=Object(s.a)({name:"sidebar-form"},function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,_=Object(s.a)({name:"sidebar-header"},function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,y={name:"sidebar-minimizer",methods:{sidebarMinimize:function(){document.body.classList.toggle("sidebar-minimized")},brandMinimize:function(){document.body.classList.toggle("brand-minimized")}}},k=Object(s.a)(y,function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"sidebar-minimizer",attrs:{type:"button"},on:{click:function(e){t.sidebarMinimize(),t.brandMinimize()}}})},[],!1,null,null,null).exports,C=a("Gu7T"),S=a.n(C),w={name:"sidebar-nav-divider",props:{classes:{type:String,default:""}},computed:{classList:function(){return["divider"].concat(S()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}},F=Object(s.a)(w,function(){var t=this.$createElement;return(this._self._c||t)("li",{class:this.classList})},[],!1,null,null,null).exports,x={props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""}},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}},T=Object(s.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"nav-item nav-dropdown",attrs:{tag:"li",to:t.url,disabled:""}},[a("div",{staticClass:"nav-link nav-dropdown-toggle",on:{click:t.handleClick}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name))]),t._v(" "),a("ul",{staticClass:"nav-dropdown-items"},[t._t("default")],2)])},[],!1,null,null,null).exports,j={name:"sidebar-nav-link",props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""},badge:{type:Object,default:function(){}},variant:{type:String,default:""},classes:{type:String,default:""}},computed:{classList:function(){return["nav-link",this.linkVariant].concat(S()(this.itemClasses))},linkVariant:function(){return this.variant?"nav-link-"+this.variant:""},itemClasses:function(){return this.classes?this.classes.split(" "):[]},isExternalLink:function(){return"http"===this.url.substring(0,4)}}},$=Object(s.a)(j,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isExternalLink?a("div",[a("a",{class:t.classList,attrs:{href:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)]):a("div",[a("router-link",{class:t.classList,attrs:{to:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)],1)},[],!1,null,null,null).exports,E={props:{name:{type:String,default:""},classes:{type:String,default:""},wrapper:{type:Object,default:function(){}}},computed:{classList:function(){return["nav-title"].concat(S()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}},L=Object(s.a)(E,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.classList},[t.wrapper&&t.wrapper.element?[a(t.wrapper.element,t._b({tag:"component"},"component",t.wrapper.attributes,!1),[t._v("\n      "+t._s(t.name)+"\n    ")])]:[t._v("\n    "+t._s(t.name)+"\n  ")]],2)},[],!1,null,null,null).exports,A={name:"sidebar-nav-item",props:{classes:{type:String,default:""}},computed:{classList:function(){return["nav-item"].concat(S()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}},methods:{hideMobile:function(){document.body.classList.contains("sidebar-mobile-show")&&document.body.classList.toggle("sidebar-mobile-show")}}},W=Object(s.a)(A,function(){var t=this.$createElement;return(this._self._c||t)("li",{class:this.classList,on:{click:this.hideMobile}},[this._t("default")],2)},[],!1,null,null,null).exports,I={name:"sidebar-nav-label",components:{SidebarNavItem:W,SidebarNavLink:$},props:{name:{type:String,default:""},url:{type:String,default:"#"},icon:{type:String,default:"fa fa-circle"},classes:{type:String,default:""},label:{type:Object,required:!0,default:function(){}}},computed:{classList:function(){return{navItem:["hidden-cn"].concat(S()(this.getClasses(this.classes))).join(" "),navLink:"nav-label",icon:[this.icon?this.icon:"fa fa-circle",this.label.variant?"text-"+this.label.variant:"",this.label.class?this.label.class:""].join(" ")}}},methods:{getClasses:function(t){return t?t.split(" "):[]}}},O=Object(s.a)(I,function(){var t=this.$createElement,e=this._self._c||t;return e("SidebarNavItem",{attrs:{classes:this.classList.navItem}},[e("a",{class:this.classList.navLink,attrs:{href:this.url}},[e("i",{class:this.classList.icon}),this._v(" "+this._s(this.name))])])},[],!1,null,null,null).exports,G={name:"sidebar",props:{navItems:{type:Array,required:!0,default:function(){return[]}}},components:{SidebarFooter:b,SidebarForm:g,SidebarHeader:_,SidebarMinimizer:k,SidebarNavDivider:F,SidebarNavDropdown:T,SidebarNavLink:$,SidebarNavTitle:L,SidebarNavItem:W,SidebarNavLabel:O},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}};var N=function(t){a("CZ73")},P=Object(s.a)(G,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("SidebarHeader"),t._v(" "),a("SidebarForm"),t._v(" "),a("nav",{staticClass:"sidebar-nav"},[a("div",{attrs:{slot:"header"},slot:"header"}),t._v(" "),a("ul",{staticClass:"nav"},[t._l(t.navItems,function(e,i){return[e.title?[a("SidebarNavTitle",{key:i,attrs:{name:e.name,classes:e.class,wrapper:e.wrapper}})]:e.divider?[a("SidebarNavDivider",{key:i,attrs:{classes:e.class}})]:e.label?[a("SidebarNavLabel",{key:i,attrs:{name:e.name,url:e.url,icon:e.icon,label:e.label,classes:e.class}})]:[e.children?[a("SidebarNavDropdown",{key:i,attrs:{name:e.name,url:e.url,icon:e.icon}},[t._l(e.children,function(i,n){return[i.children?[a("SidebarNavDropdown",{key:n,attrs:{name:i.name,url:i.url,icon:i.icon}},t._l(i.children,function(t,i){return a("li",{key:i,staticClass:"nav-item"},[a("SidebarNavLink",{attrs:{name:t.name,url:t.url,icon:t.icon,badge:t.badge,variant:e.variant}})],1)}))]:[a("SidebarNavItem",{key:n,attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:i.name,url:i.url,icon:i.icon,badge:i.badge,variant:e.variant}})],1)]]})],2)]:[a("SidebarNavItem",{key:i,attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:e.name,url:e.url,icon:e.icon,badge:e.badge,variant:e.variant}})],1)]]]})],2),t._v(" "),t._t("default")],2),t._v(" "),a("SidebarFooter"),t._v(" "),a("SidebarMinimizer")],1)},[],!1,N,null,null).exports,z={model:{prop:"checked",event:"change"},props:{value:{default:!0},uncheckedValue:{default:!1},checked:{default:!1},type:{type:String,default:"default"},variant:{type:String,default:""},pill:{type:Boolean,default:!1},on:{type:String,default:null},off:{type:String,default:null},size:{type:String,default:null}},computed:{classList:function(){return["switch",this.switchType,this.switchVariant,this.switchPill,this.switchSize]},switchType:function(){return this.type?"switch-"+this.type:"switch-default"},switchVariant:function(){return this.variant?"switch-"+this.variant:"switch-secondary"},switchPill:function(){return this.pill?"switch-pill":null},switchSize:function(){return this.size?"switch-"+this.size:""},isChecked:function(){return this.checked===this.value},isOn:function(){return!!this.on||null}},methods:{handleChange:function(t){var e=t.target.checked;this.$emit("change",e?this.value:this.uncheckedValue)}}},D=(Object(s.a)(z,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.classList},[a("input",{staticClass:"switch-input",attrs:{type:"checkbox"},domProps:{value:t.value,checked:t.isChecked},on:{change:t.handleChange}}),t._v(" "),t.isOn?[a("span",{staticClass:"switch-label",attrs:{"data-on":t.on,"data-off":t.off}})]:[a("span",{staticClass:"switch-label"})],t._v(" "),a("span",{staticClass:"switch-handle"})],2)},[],!1,null,null,null).exports,{name:"full",components:{AppHeader:p,Sidebar:P,AppAside:d,AppFooter:h,Breadcrumb:m},data:function(){return{nav:c.items}},computed:{name:function(){return this.$route.name},list:function(){return this.$route.matched}}}),q=Object(s.a)(D,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app"},[e("AppHeader"),this._v(" "),e("div",{staticClass:"app-body"},[e("Sidebar",{attrs:{navItems:this.nav}}),this._v(" "),e("main",{staticClass:"main"},[e("breadcrumb",{attrs:{list:this.list}}),this._v(" "),e("div",{staticClass:"container-fluid"},[e("router-view")],1)],1),this._v(" "),e("AppAside")],1)],1)},[],!1,null,null,null).exports,H=Object(s.a)({name:"index"},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"animated fadeIn"},[e("p",{staticClass:"text-info"},[this._v("欢迎来到WIKI知识库")])])}],!1,null,null,null).exports,B=a("mtWM"),K=a.n(B).a.create();K.defaults.timaout=5e3,K.defaults.baseURL="http://gateway.mygear.cn/wiki";var M=K;function U(){return M({url:"/categories",method:"GET"})}function R(){return M({url:"/keyword_tags",method:"GET"})}function V(){return M({url:"/project_tags",method:"GET"})}function Z(t,e){return M({url:"/articles?page="+t+"&size="+e,method:"GET"})}function J(t){return M({url:"zuul/ciu/files",baseURL:"http://gateway.mygear.cn",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:t})}var Q={props:{fileName:{type:String,default:""}},methods:{deleteFile:function(){this.$emit("delete")}}},X=Object(s.a)(Q,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-list"},[t._m(0),t._v(" "),a("div",{staticClass:"file-content"},[a("span",{staticClass:"file-name"},[t._v(t._s(t.fileName))]),t._v(" "),a("span",{staticClass:"file-delete",on:{click:t.deleteFile}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 删除")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-icon"},[e("i",{staticClass:"fa fa-file-archive-o"})])}],!1,null,null,null).exports,Y={name:"addArticle",components:{fileList:X},data:function(){return{editorOption:{theme:"bubble",placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"],["clean"]]}},contentForm:{text:"",textHtml:""},categoryId:"",articleForm:{attachments:[],author:"太空漫步",content:{text:""},keywordTags:"",projectTags:"",className:"",reference:"",title:"",subtitle:"",unionId:"user007"},classSelete:[],keyWordsSelete:[],projectTagsSelete:[],rules:{title:[{required:!0,message:"文章标题不能为空，请输入文章标题",trigger:"blur"}],subtitle:[{required:!0,message:"文章短标题不能为空，请输入文章短标题",trigger:"blur"},{min:3,message:"建议长度在 3 到 10 个中文字符左右",trigger:"change"}],className:[{required:!0,message:"请选择文章分类",trigger:"change"}]}}},computed:{editor:function(){return this.$refs.myTextEditor.quill}},created:function(){this.initGetClasses(),this.initGetKeyWords(),this.initGetProjectTag()},methods:{initGetClasses:function(){var t=this;U().then(function(e){t.classSelete=e.data.data.content})},initGetKeyWords:function(){var t=this;R().then(function(e){t.keyWordsSelete=e.data.data.content})},initGetProjectTag:function(){var t=this;V().then(function(e){t.projectTagsSelete=e.data.data.content})},classChange:function(t){this.categoryId=t.id},keyWordChange:function(t){this.articleForm.keywordTags=t},projectTagChange:function(t){this.articleForm.projectTags=t},$imgAdd:function(t,e){var a=this.$refs.md,i=new FormData;i.append("file",e),J(i).then(function(e){a.$img2Url(t,e.data.data.url)})},saveContent:function(t,e){this.contentForm.text=t,this.contentForm.textHtml=e},selectFile:function(t){var e=this,a=t.target.files[0],i=new FormData;i.append("file",a),J(i).then(function(a){e.articleForm.attachments.push({name:t.target.files[0].name,url:a.data.data.url})})},deleteFile:function(t){this.articleForm.attachments.splice(t,1)},submit:function(){var t=this;this.contentForm.text=this.$refs.md.d_value,this.contentForm.textHtml=this.$refs.md.d_render,this.articleForm.content.text.length<=0?alert("正文内容不能为空，请填写正文内容"):this.$refs.articleForm.validate(function(e){if(!e)return alert("提交失败!!"),!1;var a,i;(a=t.categoryId,i=t.articleForm,M({url:"/articles?categoryId="+a,method:"POST",data:i})).then(function(e){var a,i,n=e.data.data.id;(a=n,i=t.contentForm,M({url:"/articles/"+a+"/content",method:"POST",data:i})).then(function(e){200===e.status?(alert("添加成功"),t.$router.push({path:"articleList"})):alert("服务器出错，修改失败")})})})},cancle:function(){this.$router.push({path:"articleList"})}}};var tt=function(t){a("bsZI")},et=Object(s.a)(Y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n          新建文章\n        ")]),t._v(" "),a("el-form",{ref:"articleForm",attrs:{model:t.articleForm,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"短标题",prop:"subtitle"}},[a("el-input",{model:{value:t.articleForm.subtitle,callback:function(e){t.$set(t.articleForm,"subtitle",e)},expression:"articleForm.subtitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"作者"}},[a("el-input",{attrs:{disabled:""},model:{value:t.articleForm.author,callback:function(e){t.$set(t.articleForm,"author",e)},expression:"articleForm.author"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"className"}},[a("el-select",{attrs:{placeholder:"请选择类别","value-key":"id"},on:{change:t.classChange},model:{value:t.articleForm.className,callback:function(e){t.$set(t.articleForm,"className",e)},expression:"articleForm.className"}},t._l(t.classSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-select",{attrs:{multiple:"","default-first-option":"","value-key":"id",placeholder:"请选择文章关键词"},on:{change:t.keyWordChange},model:{value:t.articleForm.keywordTags,callback:function(e){t.$set(t.articleForm,"keywordTags",e)},expression:"articleForm.keywordTags"}},t._l(t.keyWordsSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"项目标签"}},[a("el-select",{attrs:{multiple:"","default-first-option":"","value-key":"id",placeholder:"请选择项目标签"},on:{change:t.projectTagChange},model:{value:t.articleForm.projectTags,callback:function(e){t.$set(t.articleForm,"projectTags",e)},expression:"articleForm.projectTags"}},t._l(t.projectTagsSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"正文内容"}},[a("mavon-editor",{ref:"md",attrs:{prop:"content"},on:{save:t.saveContent,imgAdd:t.$imgAdd},model:{value:t.articleForm.content.text,callback:function(e){t.$set(t.articleForm.content,"text",e)},expression:"articleForm.content.text"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"参考"}},[a("div",{staticClass:"quill-editor-example"},[a("quill-editor",{ref:"myTextEditor",staticClass:"editor-example bubble",attrs:{options:t.editorOption,content:t.articleForm.reference},model:{value:t.articleForm.reference,callback:function(e){t.$set(t.articleForm,"reference",e)},expression:"articleForm.reference"}})],1),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticStyle:{color:"#f00"}},[t._v("提示：")]),t._v("多个参考请用换行隔开；")])]),t._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("label",{staticClass:"file-label",attrs:{for:"upload"}},[t._v("上传附件"),a("i",{staticClass:"fa fa-upload"}),t._v(" "),a("input",{attrs:{type:"file",id:"upload",hidden:""},on:{change:t.selectFile}})]),t._v(" "),t._l(t.articleForm.attachments,function(e,i){return a("div",{key:i},[a("file-list",{attrs:{fileName:e.name},on:{"update:fileName":function(a){t.$set(e,"name",a)},delete:function(e){t.deleteFile(i)}}})],1)})],2),t._v(" "),a("div",{staticClass:"form-actions"},[a("b-button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.cancle}},[t._v("取消")])],1)],1)],1)],1)],1)],1)},[],!1,tt,"data-v-aacdb57c",null).exports,at={data:function(){return{currentPage:1,total:10,size:10,list:[],options:[],optionsSelected:""}},created:function(){this.initGetArticelAllList()},methods:{initGetArticelAllList:function(){var t=this;Z(1,10).then(function(e){t.list=e.data.data.content,t.total=e.data.data.totalElements,t.size=e.data.data.size}),U().then(function(e){t.options=e.data.data.content})},optionsChange:function(t){var e=this;(function(t,e,a){return M({url:"/articles?categoryId="+t+"&page="+e+"&size="+a,method:"GET"})})(t,1,10).then(function(t){e.list=t.data.data.content,e.total=t.data.data.totalElements,e.size=t.data.data.size})},handleDelete:function(t,e){var a=this;this.$confirm("确定删除 "+e.title+" ？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t=e.id,M({url:"/articles/"+t,method:"DELETE"})).then(function(t){a.$message({type:"success",message:"删除成功!"}),a.initGetArticelAllList()}).catch(function(){a.$message({type:"error",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(t){var e=this;Z(t,10).then(function(t){e.list=t.data.data.content,e.total=t.data.data.totalElements,e.size=t.data.data.size})}}};var it=function(t){a("hA2H")},nt=Object(s.a)(at,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("WIKI知识库列表")]),t._v(" "),a("div",[a("el-select",{attrs:{placeholder:"按分类搜索"},on:{change:function(e){t.optionsChange(t.optionsSelected)}},model:{value:t.optionsSelected,callback:function(e){t.optionsSelected=e},expression:"optionsSelected"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("router-link",{attrs:{to:"../addArticle"}},[a("el-button",{attrs:{type:"primary"}},[t._v("新建文章")])],1)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{label:"分类",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.category.name)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标题","min-width":"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"../articleDetail",params:{articleId:e.row.id},query:{articleId:e.row.id}}}},[t._v("\n                "+t._s(e.row.title)+"\n              ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"项目标签",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.projectTags,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small item-box"},[a("span",[t._v(t._s(e.name))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"关键词标签",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.keywordTags,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small item-box"},[a("span",[t._v(t._s(e.name))])])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"作者",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.author)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最新更新时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.updatedAt)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"浏览数",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.pv)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"../editArticle",params:{articleId:e.row.id},query:{articleId:e.row.id}}}},[a("el-button",{attrs:{size:"mini"}},[t._v("编辑\n                ")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px","text-align":"right"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)],1)],1)},[],!1,it,"data-v-2a9885d3",null).exports,st=a("BO1k"),lt=a.n(st),rt=a("woOf"),ot=a.n(rt),ct=a("DAYN"),dt=a.n(ct),ut={data:function(){return{isShow:!1,showText:!1,hideText:!0}},props:{title:{type:String,default:""}},methods:{overShow:function(){this.isShow=!0},outHide:function(){this.isShow=!1},removeClasses:function(){this.$emit("delete")},editClasses:function(){this.$emit("edit")}}};var mt=function(t){a("AAkB")},ft={components:{cateGory:Object(s.a)(ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cate-item",on:{mouseenter:t.overShow,mouseleave:t.outHide}},[a("div",{staticClass:"name"},[t._v(t._s(t.title))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"option"},[a("div",{on:{click:t.editClasses}},[a("i",{staticClass:"fa fa-edit"}),t._v(" 编辑\n        ")]),t._v(" "),a("div",{on:{click:t.removeClasses}},[a("i",{staticClass:"fa fa-trash"}),t._v(" 删除\n        ")])])])},[],!1,mt,null,null).exports,dragGable:dt.a},data:function(){return{isShow:!1,dialogFormAddSet:!1,dialogFormEditSet:!1,classesIndex:"",classList:{createdAt:"",description:"",fatherId:94,id:96,level:74,name:"",sort:"",updatedAt:""},updateClass:[],classes:[],formLabelWidth:"100px"}},created:function(){this.initGetClasses()},methods:{initGetClasses:function(){var t=this;U().then(function(e){t.classes=e.data.data.content})},initAddClasses:function(){var t,e=this;(t=this.classList,M({url:"/categories",method:"POST",data:t})).then(function(t){e.dialogFormAddSet=!1,e.initGetClasses()})},removeClasses:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e.classes[t].id,M({url:"/categories/"+a,method:"DELETE"})).then(function(t){e.initGetClasses()})}).catch(function(){})},dialogEid:function(t){this.dialogFormEditSet=!0,this.classesIndex=this.classes[t].id,this.updateClass=ot()({},this.classes[t])},onEndCallback:function(t){var e=this;console.log(this.classes[t.newIndex].id,this.classes);var a,i=[],n=!0,s=!1,l=void 0;try{for(var r,o=lt()(this.classes);!(n=(r=o.next()).done);n=!0){var c=r.value;i.push(c.id)}}catch(t){s=!0,l=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw l}}(a=i,M({url:"/categories/sort",method:"POST",data:a})).then(function(t){e.initGetClasses()})},initUpdateClasses:function(){var t,e,a=this;(t=this.classesIndex,e=this.updateClass,M({url:"/categories/"+t,method:"PUT",data:e})).then(function(t){a.dialogFormEditSet=!1,a.initGetClasses()})}}};var ht=function(t){a("8sxi")},vt=Object(s.a)(ft,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[a("div",{staticClass:"animated fadeIn"},[a("div",{staticClass:"setBox"},[a("p",[t._v("分类设置")]),t._v(" "),a("div",{staticClass:"itemBox"},[a("drag-gable",{attrs:{options:{draggable:".cate-item"}},on:{end:t.onEndCallback},model:{value:t.classes,callback:function(e){t.classes=e},expression:"classes"}},t._l(t.classes,function(e,i){return a("cate-gory",{key:i,attrs:{title:e.name},on:{edit:function(e){t.dialogEid(i)},delete:function(e){t.removeClasses(i)}}})}))],1),t._v(" "),a("div",{staticClass:"addBtn",on:{click:function(e){t.dialogFormAddSet=!0}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" 添加分类")])]),t._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:t.dialogFormAddSet},on:{"update:visible":function(e){t.dialogFormAddSet=e}}},[a("el-form",{attrs:{model:t.classList}},[a("el-form-item",{attrs:{label:"分类名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.classList.name,callback:function(e){t.$set(t.classList,"name",e)},expression:"classList.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类说明","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.classList.description,callback:function(e){t.$set(t.classList,"description",e)},expression:"classList.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormAddSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initAddClasses}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑设置",visible:t.dialogFormEditSet},on:{"update:visible":function(e){t.dialogFormEditSet=e}}},[a("el-form",{attrs:{model:t.updateClass}},[a("el-form-item",{attrs:{label:"分类名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateClass.name,callback:function(e){t.$set(t.updateClass,"name",e)},expression:"updateClass.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类说明","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateClass.description,callback:function(e){t.$set(t.updateClass,"description",e)},expression:"updateClass.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormEditSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initUpdateClasses}},[t._v("确 定")])],1)],1)],1)])},[],!1,ht,null,null).exports,pt={data:function(){return{isShow:!1,showText:!1,hideText:!0}},props:{title:{type:String,default:""}},methods:{overShow:function(){this.isShow=!0},outHide:function(){this.isShow=!1},removeClasses:function(){this.$emit("delete")},editClasses:function(){this.$emit("edit")}}};var bt=function(t){a("vtQ9")},gt=Object(s.a)(pt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"items",on:{mouseenter:t.overShow,mouseleave:t.outHide}},[t._v("\n    "+t._s(t.title)+"\n    "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"option"},[a("div",{staticClass:"btns edit",on:{click:t.editClasses}},[t._v("编辑")]),t._v(" "),a("div",{staticClass:"btns delete",on:{click:t.removeClasses}},[t._v("删除")])])])},[],!1,bt,null,null).exports,_t={components:{keyTag:gt},name:"systemSetup",data:function(){return{isShow:!1,dialogFormAddSet:!1,dialogFormEditSet:!1,keyWordIndex:"",keyWordList:{id:"",name:""},updatekeyWord:"",keyWords:"",formLabelWidth:"100px"}},created:function(){this.initGetKeyWords()},methods:{initGetKeyWords:function(){var t=this;R().then(function(e){t.keyWords=e.data.data.content})},initAddKeyWord:function(){var t,e=this;(t=this.keyWordList,M({url:"/keyword_tags/",method:"POST",data:t})).then(function(t){e.dialogFormAddSet=!1,e.initGetKeyWords()})},removeKeyWord:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e.keyWords[t].id,M({url:"/keyword_tags/"+a,method:"DELETE"})).then(function(t){e.initGetKeyWords()})}).catch(function(){})},dialogEid:function(t){this.dialogFormEditSet=!0,this.classesIndex=this.keyWords[t].id,this.updatekeyWord=ot()({},this.keyWords[t])},initUpdateKeyWord:function(){var t,e,a=this;(t=this.classesIndex,e=this.updatekeyWord,M({url:"/keyword_tags/"+t,method:"PUT",data:e})).then(function(t){a.dialogFormEditSet=!1,a.initGetKeyWords()})}}},yt={components:{keyTag:gt},name:"systemSetup",data:function(){return{isShow:!1,dialogFormAddSet:!1,dialogFormEditSet:!1,projectTagIndex:"",projectTagsList:{id:"",name:""},updateProjectTag:"",projectTags:"",formLabelWidth:"100px"}},created:function(){this.initGetProjectTag()},methods:{initGetProjectTag:function(){var t=this;V().then(function(e){t.projectTags=e.data.data.content})},initAddProjectTag:function(){var t,e=this;(t=this.projectTagsList,M({url:"/project_tags",method:"POST",data:t})).then(function(t){e.dialogFormAddSet=!1,e.initGetProjectTag()})},removeProjectTag:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e.projectTags[t].id,M({url:"/project_tags/"+a,method:"DELETE"})).then(function(t){e.initGetProjectTag()})}).catch(function(){})},dialogEid:function(t){this.dialogFormEditSet=!0,this.projectTagIndex=this.projectTags[t].id,this.updateProjectTag=ot()({},this.projectTags[t])},initUpdateProjectTag:function(){var t,e,a=this;(t=this.projectTagIndex,e=this.updateProjectTag,M({url:"/project_tags/"+t,method:"PUT",data:e})).then(function(t){a.dialogFormEditSet=!1,a.initGetProjectTag()})}}};var kt=function(t){a("MMjG")},Ct={components:{category:vt,keyWords:Object(s.a)(_t,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[a("div",{staticClass:"animated fadeIn"},[a("div",{staticClass:"tagBox"},[a("p",[t._v("关键词设置")]),t._v(" "),a("div",{staticClass:"itemBox"},[t._l(t.keyWords,function(e,i){return a("key-tag",{key:i,attrs:{title:e.name},on:{edit:function(e){t.dialogEid(i)},delete:function(e){t.removeKeyWord(i)}}})}),t._v(" "),a("div",{staticClass:"items addBtn",on:{click:function(e){t.dialogFormAddSet=!0}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" 添加关键词")])],2)]),t._v(" "),a("el-dialog",{attrs:{title:"添加关键词",visible:t.dialogFormAddSet},on:{"update:visible":function(e){t.dialogFormAddSet=e}}},[a("el-form",{attrs:{model:t.keyWordList}},[a("el-form-item",{attrs:{label:"关键词名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.keyWordList.name,callback:function(e){t.$set(t.keyWordList,"name",e)},expression:"keyWordList.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormAddSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initAddKeyWord}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑关键词",visible:t.dialogFormEditSet},on:{"update:visible":function(e){t.dialogFormEditSet=e}}},[a("el-form",{attrs:{model:t.updatekeyWord}},[a("el-form-item",{attrs:{label:"关键词名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updatekeyWord.name,callback:function(e){t.$set(t.updatekeyWord,"name",e)},expression:"updatekeyWord.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormEditSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initUpdateKeyWord}},[t._v("确 定")])],1)],1)],1)])},[],!1,null,null,null).exports,projectTips:Object(s.a)(yt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[a("div",{staticClass:"animated fadeIn"},[a("div",{staticClass:"tagBox"},[a("p",[t._v("项目标签设置")]),t._v(" "),a("div",{staticClass:"itemBox"},[t._l(t.projectTags,function(e,i){return a("key-tag",{key:i,attrs:{title:e.name},on:{edit:function(e){t.dialogEid(i)},delete:function(e){t.removeProjectTag(i)}}})}),t._v(" "),a("div",{staticClass:"items addBtn",on:{click:function(e){t.dialogFormAddSet=!0}}},[a("i",{staticClass:"fa fa-plus"}),t._v(" 添加项目标签")])],2)]),t._v(" "),a("el-dialog",{attrs:{title:"添加项目标签",visible:t.dialogFormAddSet},on:{"update:visible":function(e){t.dialogFormAddSet=e}}},[a("el-form",{attrs:{model:t.projectTagsList}},[a("el-form-item",{attrs:{label:"项目标签名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.projectTagsList.name,callback:function(e){t.$set(t.projectTagsList,"name",e)},expression:"projectTagsList.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormAddSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initAddProjectTag}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑项目标签",visible:t.dialogFormEditSet},on:{"update:visible":function(e){t.dialogFormEditSet=e}}},[a("el-form",{attrs:{model:t.updateProjectTag}},[a("el-form-item",{attrs:{label:"项目标签名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.updateProjectTag.name,callback:function(e){t.$set(t.updateProjectTag,"name",e)},expression:"updateProjectTag.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormEditSet=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.initUpdateProjectTag}},[t._v("确 定")])],1)],1)],1)])},[],!1,kt,null,null).exports},name:"systemSetup"},St=Object(s.a)(Ct,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"animated fadeIn"},[e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("b-card",[e("div",{attrs:{slot:"header"},slot:"header"},[this._v("\n          系统设置\n        ")]),this._v(" "),e("b-row",[e("category"),this._v(" "),e("key-words"),this._v(" "),e("project-tips")],1)],1)],1)],1)],1)},[],!1,null,null,null).exports,wt={name:"editArticle",components:{fileList:X},data:function(){return{editorOption:{theme:"bubble",placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"],["clean"]]}},contentForm:{},categoryId:"",articleForm:{attachments:[],author:"太空漫步",content:{text:""},keywordTags:"",projectTags:"",reference:"",title:"",subtitle:"",unionId:"user007"},classSelete:[],keyWordsSelete:[],projectTagsSelete:[],rules:{title:[{required:!0,message:"文章标题不能为空，请输入文章标题",trigger:"change"}],subtitle:[{required:!0,message:"文章短标题不能为空，请输入文章短标题",trigger:"change"},{min:3,message:"建议长度在 3 到 10 个中文字符左右",trigger:"change"}],category:[{required:!0,message:"请选择文章分类",trigger:"change"}]}}},created:function(){this.initGetClasses(),this.initGetKeyWords(),this.initGetProjectTag(),this.initGetArticleDetail()},methods:{initGetClasses:function(){var t=this;U().then(function(e){t.classSelete=e.data.data.content})},initGetKeyWords:function(){var t=this;R().then(function(e){t.keyWordsSelete=e.data.data.content})},initGetProjectTag:function(){var t=this;V().then(function(e){t.projectTagsSelete=e.data.data.content})},initGetArticleDetail:function(){var t,e=this;(t=this.$route.query.articleId,M({url:"/articles/"+t+"/content",method:"GET"})).then(function(t){e.articleForm=t.data.data.article,e.categoryId=t.data.data.article.category.id,e.className=t.data.data.article.category,e.contentForm={text:t.data.data.text,id:t.data.data.id,textHtml:t.data.data.textHtml}})},classChange:function(t){this.categoryId=t.id},keyWordChange:function(t){this.articleForm.keywordTags=t},projectTagChange:function(t){this.articleForm.projectTags=t},$imgAdd:function(t,e){console.log(e);var a=this.$refs.md,i=new FormData;i.append("file",e),J(i).then(function(e){a.$img2Url(t,e.data.data.url)})},saveContent:function(t,e){this.contentForm.text=t,this.contentForm.textHtml=e},selectFile:function(t){var e=this,a=t.target.files[0],i=new FormData;i.append("file",a),J(i).then(function(a){e.articleForm.attachments.push({name:t.target.files[0].name,url:a.data.data.url})})},deleteFile:function(t){this.articleForm.attachments.splice(t,1)},submit:function(){var t=this;this.contentForm.text=this.$refs.md.d_value,this.contentForm.textHtml=this.$refs.md.d_render,this.contentForm.text.length<=0?alert("正文内容不能为空，请填写正文内容"):this.$refs.articleForm.validate(function(e){if(!e)return alert("提交失败!!"),!1;var a,i,n;(a=t.articleForm.id,i=t.categoryId,n=t.articleForm,M({url:"/articles/"+a+"?categoryId="+i,method:"PUT",data:n})).then(function(e){var a,i;(a=t.articleForm.id,i=t.contentForm,M({url:"/articles/"+a+"/content",method:"PUT",data:i})).then(function(e){200===e.status?(alert("修改成功！"),t.$router.push({path:"editArticle"})):alert("服务器出错，修改失败")})})})},cancle:function(){this.$router.push({path:"articleList"})}}};var Ft=function(t){a("lNpM")},xt=Object(s.a)(wt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{sm:"12"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n          编辑文章\n        ")]),t._v(" "),a("el-form",{ref:"articleForm",attrs:{model:t.articleForm,"label-width":"120px",rules:t.rules}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"短标题",prop:"subtitle"}},[a("el-input",{model:{value:t.articleForm.subtitle,callback:function(e){t.$set(t.articleForm,"subtitle",e)},expression:"articleForm.subtitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"作者"}},[a("el-input",{attrs:{disabled:""},model:{value:t.articleForm.author,callback:function(e){t.$set(t.articleForm,"author",e)},expression:"articleForm.author"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"category"}},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择类别"},on:{change:t.classChange},model:{value:t.articleForm.category,callback:function(e){t.$set(t.articleForm,"category",e)},expression:"articleForm.category"}},t._l(t.classSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-select",{attrs:{multiple:"","default-first-option":"","value-key":"id",placeholder:"请选择文章关键词"},on:{change:t.keyWordChange},model:{value:t.articleForm.keywordTags,callback:function(e){t.$set(t.articleForm,"keywordTags",e)},expression:"articleForm.keywordTags"}},t._l(t.keyWordsSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"项目标签"}},[a("el-select",{attrs:{multiple:"","default-first-option":"","value-key":"id",placeholder:"请选择项目标签"},on:{change:t.projectTagChange},model:{value:t.articleForm.projectTags,callback:function(e){t.$set(t.articleForm,"projectTags",e)},expression:"articleForm.projectTags"}},t._l(t.projectTagsSelete,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"正文内容"}},[a("mavon-editor",{ref:"md",on:{save:t.saveContent,imgAdd:t.$imgAdd},model:{value:t.contentForm.text,callback:function(e){t.$set(t.contentForm,"text",e)},expression:"contentForm.text"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"参考"}},[a("div",{staticClass:"quill-editor-example"},[a("quill-editor",{ref:"myTextEditor",staticClass:"editor-example bubble",attrs:{options:t.editorOption,content:t.articleForm.reference},model:{value:t.articleForm.reference,callback:function(e){t.$set(t.articleForm,"reference",e)},expression:"articleForm.reference"}})],1),t._v(" "),a("span",{staticStyle:{"font-size":"13px"}},[a("span",{staticStyle:{color:"#f00"}},[t._v("提示：")]),t._v("多个参考请用换行隔开；")])]),t._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("label",{staticClass:"file-label",attrs:{for:"upload"}},[t._v("上传附件"),a("i",{staticClass:"fa fa-upload"}),t._v(" "),a("input",{attrs:{type:"file",id:"upload",hidden:""},on:{change:t.selectFile}})]),t._v(" "),t._l(t.articleForm.attachments,function(e,i){return a("div",{key:i},[a("file-list",{attrs:{fileName:e.name},on:{"update:fileName":function(a){t.$set(e,"name",a)},delete:function(e){t.deleteFile(i)}}})],1)})],2),t._v(" "),a("div",{staticClass:"form-actions"},[a("b-button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("保存")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.cancle}},[t._v("取消")])],1)],1)],1)],1)],1)],1)},[],!1,Ft,"data-v-17f738ee",null).exports;var Tt={data:function(){return{mdForm:{article:{title:"",author:""}},reference:[],isRef:!1,isAtta:!1}},created:function(){this.initPreview()},methods:{initPreview:function(){var t,e=this;(t=this.$route.query.articleId,M({url:"/articles/"+t+"/content",method:"GET"})).then(function(t){if(e.mdForm=t.data.data,0===t.data.data.article.attachments.length?e.isAtta=!1:e.isAtta=!0,t.data.data.article.reference){e.isRef=!0;var a=[],i=t.data.data.article.reference.split("<p>"),n=!0,s=!1,l=void 0;try{for(var r,o=lt()(i);!(n=(r=o.next()).done);n=!0){var c=r.value.replace("</p>","");a.push(c)}}catch(t){s=!0,l=t}finally{try{!n&&o.return&&o.return()}finally{if(s)throw l}}var d=!0,u=!1,m=void 0;try{for(var f,h=lt()(a);!(d=(f=h.next()).done);d=!0){var v=f.value;e.reference.push({name:v})}}catch(t){u=!0,m=t}finally{try{!d&&h.return&&h.return()}finally{if(u)throw m}}}})}}};var jt=function(t){a("Wv4X")},$t=Object(s.a)(Tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"md-header"},[a("h5",{staticClass:"title"},[t._v(t._s(t.mdForm.article.title))]),t._v(" "),a("div",{staticClass:"tip"},[a("div",{staticClass:"md-tag"},[t._v("作者: "+t._s(t.mdForm.article.author))]),t._v(" "),a("div",{staticClass:"md-tag"},[t._v("日期: "+t._s(t.mdForm.article.updatedAt))]),t._v(" "),a("div",{staticClass:"md-tag"},[t._v("浏览数: "+t._s(t.mdForm.article.pv)+"次")])]),t._v(" "),a("div",{staticClass:"key-word"},[t._v("\n      关键词:\n      "),t._l(t.mdForm.article.keywordTags,function(e,i){return a("div",{key:i,staticClass:"md-tag"},[a("i",{staticClass:"fa fa-tag"}),t._v(" "),a("span",[t._v(t._s(e.name))])])})],2),t._v(" "),a("div",{staticClass:"key-word"},[t._v("\n      项目标签:\n      "),t._l(t.mdForm.article.projectTags,function(e,i){return a("div",{key:i,staticClass:"md-tag"},[a("i",{staticClass:"fa fa-tag"}),t._v(" "),a("span",[t._v(t._s(e.name))])])})],2)]),t._v(" "),a("div",{staticClass:"md-content"},[a("mavon-editor",{attrs:{defaultOpen:"preview",toolbarsFlag:!1,subfield:!1,preview:!0},model:{value:t.mdForm.textHtml,callback:function(e){t.$set(t.mdForm,"textHtml",e)},expression:"mdForm.textHtml"}})],1),t._v(" "),a("div",{staticClass:"md-footer"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isRef,expression:"isRef"}],staticClass:"refen"},[a("div",{staticClass:"text"},[t._v("参考:")]),t._v(" "),a("div",{staticClass:"href"},t._l(t.reference,function(e,i){return a("a",{key:i,attrs:{href:e.name,target:"_blank"}},[t._v(t._s(e.name))])}))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAtta,expression:"isAtta"}],staticClass:"refen"},[a("div",{staticClass:"text"},[t._v("附件:")]),t._v(" "),a("div",{staticClass:"href"},t._l(t.mdForm.article.attachments,function(e,i){return a("a",{key:i,attrs:{href:e.url,download:""}},[t._v(t._s(e.name))])}))])])])},[],!1,jt,null,null).exports;i.default.use(o.a);var Et=new o.a({mode:"hash",linkActiveClass:"open active",scrollBehavior:function(){return{y:0}},routes:[{path:"/",redirect:"/dashboard",name:"首页",component:q,children:[{path:"dashboard",name:"仪表盘",component:H},{path:"addArticle",name:"添加文章",component:et},{path:"articleList",name:"文章列表",component:nt},{path:"systemSetup",name:"系统设置",component:St},{path:"editArticle",name:"编辑文章",component:xt},{path:"articleDetail",name:"文章详情",component:$t}]}]}),Lt=a("zL8q"),At=a.n(Lt),Wt=(a("tvR6"),a("OS1Z")),It=a.n(Wt),Ot=(a("pw1w"),a("G0J2")),Gt=a.n(Ot);a("3f40"),a("4qOc"),a("+cgv");i.default.use(n.a),i.default.use(At.a),i.default.use(It.a),i.default.use(Gt.a),new i.default({el:"#app",router:Et,template:"<App/>",components:{App:r}})},Wv4X:function(t,e){},bsZI:function(t,e){},feHY:function(t,e){},"ggw/":function(t,e){},hA2H:function(t,e){},lNpM:function(t,e){},luqJ:function(t,e){},pw1w:function(t,e){},tvR6:function(t,e){},vtQ9:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ad84797c6bd952e36db8.js.map